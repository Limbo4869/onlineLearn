webpackJsonp([17],{HPEa:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"manageStyle"},[a("el-breadcrumb",{staticClass:"breadcrumb"},[a("el-breadcrumb-item",{staticClass:"el-icon-setting"},[e._v("\n             后台管理\n        ")]),e._v(" "),a("el-breadcrumb-item",[a("span",{on:{click:e.handleBackSearch}},[e._v("\n                课程管理\n            ")])]),e._v(" "),e.ifSearch?a("el-breadcrumb-item",[e._v("搜索\n        ")]):e._e()],1),e._v(" "),a("div",{staticClass:"header"},[a("el-input",{staticStyle:{width:"300px"},attrs:{size:"small",placeholder:"请输入内容"},model:{value:e.searchInput,callback:function(t){e.searchInput=t},expression:"searchInput"}},[a("span",{staticClass:"el-icon-search searchIcon",attrs:{slot:"suffix"},on:{click:e.handleSearch},slot:"suffix"})]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success",size:"small"},on:{click:e.handleUpload}},[e._v("\n            上传课程\n        ")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"small",icon:"el-icon-menu"},on:{click:e.handleShowMore}}),e._v(" "),a("el-select",{staticStyle:{width:"110px",position:"absolute",right:"40px"},attrs:{size:"small"},on:{change:e.handleChartChange},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{value:e.value}})}))],1),e._v(" "),e.ifMoreFun?a("div",{staticClass:"moreFun"},[a("el-button",{attrs:{disabled:e.ifDelect,type:"primary",size:"small",icon:"el-icon-delete"},on:{click:e.handleDelectRows}},[e._v("\n            批量删除\n        ")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete"},on:{click:e.handleDelectAll}},[e._v("\n            全部删除\n        ")])],1):e._e(),e._v(" "),a("div",{staticClass:"content"},[a("el-table",{directives:[{name:"show",rawName:"v-show",value:e.ifTable,expression:"ifTable"}],ref:"table",attrs:{data:e.tableData,height:"100%",border:""},on:{"select-all":e.handleSelectAll,select:e.handleSelectBatch}},[a("el-table-column",{attrs:{fixed:"",align:"center",type:"selection",width:"45"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"date",label:"上传时间",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"name",label:"名称","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"category",label:"类别",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"课程状态",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{},[a("el-switch",{attrs:{"active-text":"可以观看","inactive-text":"不可观看","active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})],1)}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.handleSee("course",t)}}},[e._v("\n                        查看\n                    ")]),e._v(" "),a("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small"},on:{click:function(a){e.handleDeleteRow(t)}}},[e._v("\n                        删除\n                    ")])]}}])})],1),e._v(" "),e.ifTable?e._e():a("courseChart",{attrs:{chartData:e.chartData}})],1),e._v(" "),a("el-pagination",{staticStyle:{"align-self":"center"},attrs:{background:"",layout:"prev, pager, next","page-size":1,total:e.listNow.page},on:{"current-change":e.handlePage}})],1)},n=[];s._withStripped=!0;var i={render:s,staticRenderFns:n};t.a=i},IfJE:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var s=a("NuJq"),n={data:function(){return{delectRows:[],ifDelect:!0,tableData:[],ifSelecttALl:!1,ifSearch:!1,searchInput:"",selectValue:"",ifTable:!0,chartData:[],ifMoreFun:!1,options:[],itemCount:0,page:1,pageSearch:1,currentPage:1}},methods:{handleSelectBatch:function(e){this.delectRows=e},handleDelectRows:function(){var e=this,t=this.delectRows.map(function(e){return e.id});this.$ajax.create().post(this.urlDelect,t).then(function(){if(e.$message.success("删除成功"),e.ifSelecttALl)return e.tableData=[],void(e.ifDelect=!0);for(var t=0;t<e.tableData.length;t++)for(var a=0;a<e.delectRows.length;a++)e.delectRows[a]===e.tableData[t]&&e.tableData.splice(t,1);e.delectRows=[]})},handleSelectAll:function(e){this.delectRows=e,this.ifDelect=!this.ifDelect,this.ifSelecttALl=!0},handleDeleteRow:function(e){var t=this;this.$ajax.create().post(this.urlDelect,[e.row.id]).then(function(){t.$message.success("删除成功"),t.tableData.splice(e.$index,1)})},handleDelectAll:function(){},handlePage:function(e){this.ifSearch?(this.pageSearch=e,this.handleChangeArea("search"+e+this.searchInput,this.urlSearch)):(this.page=e,this.handleChangeArea("p"+e,this.url))},handleChartChange:function(e){this.ifTable=e!==this.options[1].value},handleSearch:function(){this.pageSearch=1,this.handleChangeArea("search1"+this.searchInput,this.urlSearch),this.ifSearch=!0,this.currentPage=this.pageSearch},handleBackSearch:function(){this.ifSearch=!1,this.handleChangeArea("p"+this.page,this.url),this.currentPage=this.page},handleSee:function(e,t){switch(e){case"course":this.$router.push({path:"/course/"+t.row.id});break;case"article":window.open("http://localhost:3000/#/main/articlePage/article/"+t.row.id);break;case"user":this.infoData=t.row,this.handleChangeArea("dialog"+t.row.id+"最近一周","admin/user/"+t.row.id+"/week"),this.dialogUserVisible=!0;break;case"message":this.$ajaxJava.get("message/"+t.row.id).then(function(){t.row.status="已读"}),this.dialogInfo=!0,this.dialogTime=t.row.time,this.dialogContent=t.row.content;break;case"record":t.row.courseId?this.$router.push({path:"/course/"+t.row.courseId}):window.open("http://localhost:3000/#/main/articlePage/article/"+t.row.forumId)}},setChartData:function(){var e=this;this.chartData=[[],[],[]],this.tableData.forEach(function(t){e.chartData[0].push(t.name),e.chartData[1].push(t.useTime),e.chartData[2].push(t.accessTimes)}),this.chartData[1]=[],this.chartData[1].push([20],[3],[10],[1],[5],[12])},handleShowMore:function(){this.ifMoreFun=!this.ifMoreFun},initData:function(e){this.setItemCount(),this.handleChangeArea("p1",this.url),this.options=e,this.selectValue=e[0].value},setItemCount:function(){this.itemCount=Math.floor((this.$refs.table.$el.clientHeight-48)/60)}},watch:{tableData:function(){this.setChartData()},delectRows:function(){this.ifDelect=0===this.delectRows.length}},mixins:[s.a]}},NuJq:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"e",function(){return n}),a.d(t,"b",function(){return i}),a.d(t,"c",function(){return o}),a.d(t,"d",function(){return l});var s={data:function(){return{areas:new Map,oldTag:null,listNow:{}}},methods:{handleChangeArea:function(e,t){var a=this;this.oldTag&&(this.areas.get(this.oldTag).show=!1),this.areas.has(e)?(this.areas.get(e).show=!0,this.listNow=this.areas.get(e).itemList):this.$ajaxJava.get(t).then(function(t){a.listNow=t.data,a.areas.set(e,{show:!0,itemList:t.data})}),this.oldTag=e}}},n={data:function(){return{heartTime:""}},methods:{keepLearning:function(e){var t=this;this.heartTime=setInterval(function(){t.$ajax.create().get(e,function(e){})},2e3)},beginLearning:function(e){this.$ajaxJava.get("/"+e,function(e){})}}},i={methods:{handleLikeAcollect:function(e,t){var a=this;this.$ajaxJava.get(e+t.id).then(function(s){"0"===s.data.result?a.$message({message:e.match("liking")?"已经点赞过":"已经收藏过",type:"warning",duration:2e3,showClose:!0}):(a.$refs[e+t.id]&&(a.$refs[e+t.id].style.color="#409EFF"),t[e]++)})}}},o={methods:{handlePageBack:function(){this.$router.push({path:localStorage.backUrl})}}},l={data:function(){return{choose:"最新",typeChoose:"",url:""}},methods:{iniData:function(){-1!==this.areaFocus.indexOf("/")?this.typeChoose=this.areaFocus.split("/",1)[0]:this.typeChoose=this.areaFocus,this.handleChangeArea("new"+this.typeChoose+"P1",this.url+"/choose=new/type="+this.typeChoose+"/page=0/size=12")},handleChoose:function(e){var t="最新"===e?"new":"hot";this.handleChangeArea(t+this.typeChoose+"p1",this.url+"/choose="+t+"/type="+this.typeChoose+"/page=0/size=12")},hanleType:function(e){var t="最新"===this.choose?"new":"hot";this.handleChangeArea(t+e+"p1",this.url+"/choose="+t+"/type="+e+"/page=0/size=12")},handlePage:function(e){var t="最新"===this.choose?"new":"hot";this.handleChangeArea(t+this.typeChoose+"p"+e,this.url+"/choose="+t+"/type="+this.typeChoose+"/page="+(e-1))}}}},g6nS:function(e,t,a){"use strict";function s(e){o||a("hzbH")}Object.defineProperty(t,"__esModule",{value:!0});var n=a("kBZv"),i=a("HPEa"),o=!1,l=a("VU/8"),r=s,c=l(n.a,i.a,!1,r,"data-v-2fc2edb7",null);c.options.__file="vueProgect\\src\\components\\userCenter\\coursesManage.vue",t.default=c.exports},hzbH:function(e,t){},kBZv:function(e,t,a){"use strict";var s=a("IfJE");t.a={mounted:function(){this.initData([{value:"课程记录"},{value:"课程详情"}])},methods:{handleUpload:function(){this.$router.push({path:"/userCenter/coursesManage/coursesUpload/#coursesManage"})},setChartData:function(){var e=this;this.chartData=[[],[],[],[],[]],this.tableData.forEach(function(t){e.chartData[0].push(t.name),e.chartData[1].push(10),e.chartData[2].push(14),e.chartData[3].push(20),e.chartData[4].push(13)})},setDataFormat:function(e){var t=this;return e.courses.map(function(e){return{id:e.id,date:t.$formatDate(e.creationTimestamp),name:e.title,status:!0,category:e.type,accessTimes:e.learnCount,likes:e.liking,collection:e.collections,question:e.question}})}},components:{courseChart:function(){return a.e(31).then(a.bind(null,"9WI4"))}},computed:{url:function(){return"/admin/cousers/page="+(this.page-1)+"/size="+this.itemCount},urlSearch:function(){return"/admin/cousers/page="+(this.pageSearch-1)+"/size="+this.itemCount},urlDelect:function(){return"/admin/courses"}},watch:{listNow:function(){this.tableData=this.setDataFormat(this.listNow)}},mixins:[s.a]}}});